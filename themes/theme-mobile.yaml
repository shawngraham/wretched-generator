# Wretched Mobile - Mobile-Optimized Base Theme
# A mobile-first base theme for Wretched & Alone games
# Designed for touch interfaces and small screens

theme:
  name: "Wretched Mobile"
  base: null  # This IS a base theme
  description: "Mobile-optimized base theme with touch-friendly controls and single-column layout"

  # Color Palette - High contrast for mobile readability
  colors:
    # Primary backgrounds
    primary: "#1a1a1a"              # Dark background
    secondary: "#2a2a2a"            # Slightly lighter
    tertiary: "#3a3a3a"             # Panel background

    # Accent colors - Bold and clear
    accent_primary: "#4a9eff"       # Bright blue (touch targets)
    accent_secondary: "#3a7ecf"     # Darker blue

    # Text colors - High contrast
    text_primary: "#ffffff"         # White text
    text_secondary: "#cccccc"       # Light gray
    text_tertiary: "#999999"        # Medium gray

    # UI element colors
    borders: "#444444"              # Subtle borders
    shadows: "rgba(0,0,0,0.5)"      # Strong shadows

    # State colors
    success: "#4ade80"              # Green
    warning: "#fbbf24"              # Amber
    danger: "#ef4444"               # Red
    info: "#60a5fa"                 # Blue

    # Suit-specific colors
    suits:
      spades: "#ffffff"             # White
      hearts: "#ef4444"             # Red
      diamonds: "#60a5fa"           # Blue
      clubs: "#4ade80"              # Green

    # Interactive states
    hover: "#5ab0ff"                # Lighter blue
    active: "#2a6ebf"               # Darker blue
    disabled: "rgba(255,255,255,0.3)"

  # Typography - Mobile-optimized sizes
  fonts:
    # Font families - System fonts for fast loading
    title: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
    body: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
    ui: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
    monospace: "'SF Mono', Monaco, 'Courier New', monospace"

    # No Google Fonts - use system fonts for performance
    google_fonts: []

    # Font sizes - Larger for mobile readability
    sizes:
      h1: "2em"          # 32px at 16px base
      h2: "1.5em"        # 24px
      h3: "1.25em"       # 20px
      body: "1em"        # 16px (larger base)
      small: "0.875em"   # 14px

    # Line heights - Generous for touch
    line_heights:
      title: 1.3
      body: 1.6
      compact: 1.4

    # Letter spacing
    letter_spacing:
      title: "0.5px"
      normal: "normal"
      tight: "-0.5px"

  # Layout Configuration - Mobile-first
  layout:
    container_max_width: "100%"     # Full width on mobile
    grid_columns: "1fr"             # Single column only
    grid_gap: "16px"

    # Responsive breakpoints
    breakpoints:
      mobile: "480px"
      tablet: "768px"
      desktop: "1024px"

    # Panel styling - Reduced padding
    panel:
      border_radius: "8px"
      border_width: "1px"
      padding: "16px"
      margin: "12px 0"

    # Section spacing - Compact
    section:
      border_radius: "6px"
      padding: "12px"
      margin: "12px 0"

  # Background Effects - Minimal for performance
  background:
    type: "solid"

    # Simple gradient
    gradient:
      angle: 180
      stops:
        - color: "#1a1a1a"
          position: 0
        - color: "#2a2a2a"
          position: 100

    # No overlay for performance
    overlay:
      enabled: false

    # No texture
    texture:
      enabled: false

  # Component Styling - Touch-optimized
  components:

    # Dice styling - Larger for touch
    dice:
      size: "60px"          # Smaller than desktop but still tappable
      colors:
        face: "#3a3a3a"
        border: "#4a9eff"
        text: "#ffffff"
        shadow: "rgba(0,0,0,0.5)"
      border_radius: "8px"
      border_width: "2px"
      animation:
        type: "roll"
        duration: "0.4s"    # Faster for mobile
        keyframes:
          - transform: "rotate(0deg)"
            offset: 0
          - transform: "rotate(180deg) scale(1.05)"
            offset: 0.5
          - transform: "rotate(360deg) scale(1)"
            offset: 1

    # Button styling - Large touch targets
    buttons:
      style: "solid"
      colors:
        background: "#4a9eff"
        text: "#ffffff"
        border: "#3a7ecf"
        shadow: "rgba(0,0,0,0.3)"
      border_radius: "8px"
      border_width: "0"
      padding: "16px 24px"  # Minimum 44px touch target

      # Hover state (for devices that support it)
      hover:
        background: "#5ab0ff"
        border: "#4a9eff"
        transform: "none"    # No transform on mobile
        shadow: "rgba(0,0,0,0.4)"

      # Active state - Visual feedback
      active:
        transform: "scale(0.98)"

      # Disabled state
      disabled:
        opacity: 0.5
        cursor: "not-allowed"

    # Panel styling - Simplified
    panels:
      style: "solid"
      colors:
        background: "#2a2a2a"
        border: "#444444"
        shadow: "rgba(0,0,0,0.5)"
      border_radius: "8px"
      border_width: "1px"
      shadow_size: "0 2px 8px"

      # No texture
      texture:
        enabled: false

      # No border glow
      border_glow:
        enabled: false

    # Card display styling - Stacked layout
    cards:
      display_style: "compact"

      # Card container
      container:
        background: "#2a2a2a"
        border: "#444444"
        border_radius: "8px"
        padding: "16px"
        shadow: "0 2px 8px rgba(0,0,0,0.3)"

      # Drawn card styling - Touch-optimized
      drawn_cards:
        width: "80px"       # Smaller to fit more on screen
        height: "112px"     # Maintain aspect ratio
        background: "#3a3a3a"
        border: "#4a9eff"
        border_width: "2px"
        border_radius: "6px"

        # Hover effects - Subtle on mobile
        hover:
          transform: "scale(1.05)"
          shadow: "0 4px 12px rgba(74, 158, 255, 0.5)"
          border_color: "#5ab0ff"

        # Resolved state
        resolved:
          opacity: 0.5
          border_color: "#666666"

        # Active/selected state
        active:
          border_color: "#4ade80"
          border_width: "3px"
          shadow: "0 0 16px rgba(74, 222, 128, 0.6)"

      # Card title
      title:
        font_size: "1.25em"
        color: "#ffffff"
        margin_bottom: "8px"

      # Card description
      description:
        font_size: "1em"
        line_height: 1.5
        color: "#cccccc"

      # Show metadata
      show_suit_symbols: true
      show_effects: true
      show_tokens: true
      show_blocks: true

      # Effect indicators
      effects:
        tokens_positive_color: "#4ade80"
        tokens_negative_color: "#ef4444"
        blocks_color: "#ef4444"

    # Journal/textarea styling
    journal:
      colors:
        background: "#2a2a2a"
        text: "#ffffff"
        border: "#444444"
        placeholder: "#666666"
      border_radius: "8px"
      border_width: "1px"
      padding: "16px"
      font_family: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
      font_size: "1em"      # 16px - no zoom on iOS
      line_height: 1.6
      min_height: "200px"   # Shorter on mobile

      # Scrollbar styling
      scrollbar:
        width: "8px"
        track_color: "#1a1a1a"
        thumb_color: "#4a9eff"
        thumb_hover: "#5ab0ff"

    # Stability meter styling - Visual bar only
    stability:
      display: "text_and_bar"

      # Container
      container:
        name: "Stability"
        description: "Current stability level"

      # Text colors by state
      text_colors:
        safe: "#4ade80"
        danger: "#fbbf24"
        critical: "#ef4444"

      # Progress bar
      bar:
        height: "32px"      # Larger touch target
        background: "#1a1a1a"
        border: "#444444"
        border_width: "1px"
        border_radius: "6px"

        # Fill colors by state
        fill_colors:
          safe: "#4ade80"
          danger: "#fbbf24"
          critical: "#ef4444"

    # Token counter styling
    tokens:
      display: "numeric"

      # Container
      container:
        background: "#2a2a2a"
        border: "#444444"
        border_radius: "8px"
        padding: "16px"

      # Counter display
      counter:
        font_size: "2em"    # Large and clear
        font_weight: "bold"
        colors:
          positive: "#ffffff"
          zero: "#fbbf24"
          negative: "#ef4444"

  # Modal/Dialog styling - Full screen on mobile
  modals:
    overlay:
      background: "rgba(0, 0, 0, 0.9)"
      backdrop_filter: "none"

    content:
      background: "#2a2a2a"
      border: "#444444"
      border_radius: "8px"
      padding: "20px"
      max_width: "100%"     # Full width on mobile
      shadow: "0 4px 20px rgba(0,0,0,0.8)"

    close_button:
      size: "44px"          # Large touch target
      color: "#ffffff"
      background: "#ef4444"
      hover_color: "#ff5555"

  # Tab styling - Horizontal scroll on mobile
  tabs:
    button:
      background: "#3a3a3a"
      text_color: "#ffffff"
      border: "#444444"
      border_width: "1px"
      border_radius: "6px 6px 0 0"
      padding: "12px 20px"   # Touch-friendly

      hover:
        background: "#4a4a4a"

      active:
        background: "#4a9eff"
        shadow: "0 -2px 8px rgba(74, 158, 255, 0.3)"

    border:
      color: "#444444"
      width: "1px"

  # Header styling - Compact
  header:
    background: "#2a2a2a"
    border: "#444444"
    border_width: "1px"
    border_radius: "8px"
    padding: "16px"
    shadow: "0 2px 8px rgba(0,0,0,0.3)"
    text_align: "center"

    # No texture
    texture:
      enabled: false

    # Title styling
    title:
      font_family: "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"
      font_size: "2em"
      color: "#ffffff"
      text_shadow: "none"
      letter_spacing: "0.5px"
      margin_bottom: "8px"

    # Subtitle styling
    subtitle:
      font_style: "italic"
      font_size: "1em"
      color: "#cccccc"

    # Byline styling
    byline:
      font_size: "0.875em"
      color: "#999999"
      margin_top: "8px"

  # Animation Settings - Minimal for performance
  animations:
    enabled: true

    # Timing functions
    easing:
      standard: "ease-out"
      smooth: "ease-in-out"
      bounce: "ease-out"

    # Durations - Faster on mobile
    durations:
      fast: "0.15s"
      normal: "0.2s"
      slow: "0.3s"

    # Specific animations - Reduced
    dice_roll: true
    button_hover: false     # No hover on touch devices
    card_draw: true
    panel_slide: false

  # Accessibility - Enhanced for mobile
  accessibility:
    high_contrast_mode: true
    focus_indicators: true
    focus_color: "#4a9eff"
    focus_width: "3px"

    screen_reader_labels: true
    keyboard_navigation: true

  # Narrative Flavor - Neutral (to be overridden)
  narrative:
    tone: "neutral"

    # Generic stability messages
    stability_messages:
      safe:
        - "Situation stable."
        - "Everything under control."
        - "Proceeding as planned."

      danger:
        - "Situation deteriorating."
        - "Caution advised."
        - "Approaching critical levels."

      critical:
        - "Critical situation!"
        - "Immediate action required."
        - "On the brink of failure."

    # Generic game over messages
    collapse_messages:
      - "💔 Game Over"
      - "You have failed."
      - "Try again?"

  # Print Styling - Not optimized for mobile
  print:
    enabled: false

# Custom CSS for mobile optimizations
custom_css: |
  /* Mobile-specific optimizations */

  /* Prevent text size adjustment on iOS */
  body {
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Touch action for better scrolling */
  * {
    -webkit-tap-highlight-color: rgba(74, 158, 255, 0.2);
    touch-action: manipulation;
  }

  /* Prevent zoom on input focus (iOS) */
  input, textarea, select {
    font-size: 16px !important;
  }

  /* Improve touch scrolling */
  .panel, .controls-panel, .story-panel {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
  }

  /* Stack layout for mobile */
  .game-panel {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  /* Full width controls */
  .controls-panel {
    width: 100%;
    max-height: none;
  }

  /* Card grid - responsive */
  .cards-drawn-area {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 12px;
    padding: 12px;
  }

  /* Larger tap targets for buttons */
  button {
    min-height: 44px;
    min-width: 44px;
  }

  /* Horizontal scroll for tabs on narrow screens */
  .tabs {
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
  }

  .tab-button {
    display: inline-block;
    min-width: 120px;
  }

  /* Full screen modals on mobile */
  @media (max-width: 768px) {
    .modal-content {
      width: calc(100% - 32px);
      max-height: calc(100vh - 32px);
      margin: 16px;
    }
  }

  /* Sticky header on mobile */
  header {
    position: sticky;
    top: 0;
    z-index: 10;
  }

  /* Reduce animations on low-end devices */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

# Custom JavaScript for mobile enhancements
custom_js: |
  // Mobile-specific enhancements

  // Prevent double-tap zoom on buttons
  document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
      button.addEventListener('touchend', function(e) {
        e.preventDefault();
        this.click();
      }, { passive: false });
    });
  });

  // Save scroll position
  let scrollPositions = {};
  window.addEventListener('beforeunload', function() {
    scrollPositions.journal = document.getElementById('journal')?.scrollTop || 0;
    localStorage.setItem('scrollPositions', JSON.stringify(scrollPositions));
  });

  // Restore scroll position
  window.addEventListener('load', function() {
    try {
      const saved = JSON.parse(localStorage.getItem('scrollPositions') || '{}');
      if (saved.journal && document.getElementById('journal')) {
        document.getElementById('journal').scrollTop = saved.journal;
      }
    } catch (e) {
      console.warn('Could not restore scroll position');
    }
  });
